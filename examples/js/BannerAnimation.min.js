var Keyframe={FROM:"from",TO:"to"},Ease={EASE:"ease",EASE_IN:"ease-in",EASE_OUT:"ease-out",EASE_IN_OUT:"ease-in-out",LINEAR:"linear"},Iteration={INFINITE:"infinite",ONCE:"1"},Direction={NORMAL:"normal",ALTERNATE:"alternate",REVERSE:"reverse",ALTERNATE_REVERSE:"alternate-reverse"},FillMode={BOTH:"both",FORWARDS:"forwards",BACKWARDS:"backwards",NONE:"none"};function AnimationRule(){return this._keyframes=[],this._styleName="",this._registered=!1,this}AnimationRule._whichEvent=function(e){var t=document.createElement("div");return t.style.animation?"animation"+e:t.style.webkitAnimation?"webkitAnimation"+e.charAt(0).toUpperCase()+e.slice(1):t.style.msAnimation?"MSAnimation"+e.charAt(0).toUpperCase()+e.slice(1):void 0},AnimationRule._elements=[],AnimationRule._animationStart=AnimationRule._whichEvent("start"),AnimationRule._animationEnd=AnimationRule._whichEvent("end"),AnimationRule._onWindowFocus=function(e){window.top.removeEventListener("focus",AnimationRule._onWindowFocus),window.top.addEventListener("blur",AnimationRule._onWindowBlur),AnimationRule.resumeAnimations()},AnimationRule._onWindowBlur=function(e){window.top.addEventListener("focus",AnimationRule._onWindowFocus),window.top.removeEventListener("blur",AnimationRule._onWindowBlur),AnimationRule.pauseAnimations()},AnimationRule._onAnimationEnd=function(e){e.target.removeEventListener(AnimationRule._animationEnd,AnimationRule._onAnimationEnd),AnimationRule._elements.splice(AnimationRule._elements.indexOf(e.target),1)},AnimationRule._onAnimationStart=function(e){e.target.removeEventListener(AnimationRule._animationStart,AnimationRule._onAnimationStart),e.target.addEventListener(AnimationRule._animationEnd,AnimationRule._onAnimationEnd)},AnimationRule.addFocusListener=function(){window.top.addEventListener("blur",AnimationRule._onWindowBlur)},AnimationRule.removeFocusListener=function(){window.top.removeEventListener("blur",AnimationRule._onWindowBlur)},AnimationRule.prototype.addKeyframe=function(e){return!0===this._registered?(window.alert('The animation "'+this._styleName+'" has been registered. No more keyframes may be added at this point.'),this):(0!==this._keyframes.length&&""===this._keyframes[this._keyframes.length-1].styles&&window.alert("New keyframe being added before any style changes were added to the previous keyframe."),"number"==typeof e&&(e=e.toString()+"%"),-1!==e.indexOf(";")&&(e=e.replace(";","")),-1===e.indexOf("to")&&-1===e.indexOf("from")?-1===e.indexOf("%")&&(e+="%"):(-1!==e.indexOf("%")&&(e=e.replace("%","")),"to"===e?1===this._keyframes.length&&"0%"===this._keyframes[this._keyframes.length-1].keyframe?e="100%":this._keyframes.length>1?window.alert('The keyframe marker of "to" should not have been used in this instance since percentage values where previously used.'):0===this._keyframes.length&&window.alert('The keyframe marker of "to" should not have been used in this instance since this is the first keyframe. Please use "0%" or "from".'):0===this._keyframes.length?e="0%":1===this._keyframes.length&&"0%"===this._keyframes[this._keyframes.length-1].keyframe?window.alert('The keyframe marker of "from" should not have been used in this instance since this is the second keyframe. Please use "100%" or "to".'):window.alert('The keyframe marker of "from" should not have been used in this instance. Please use use a percentage value that is a higher value from the previous keyframe marker.')),this._keyframes.push({keyframe:e,styles:""}),this)},AnimationRule.prototype.addStyle=function(e,t){if(!0===this._registered)return window.alert('The animation "'+this._styleName+'" has been registered. No more styles may be added at this point.'),this;0===this._keyframes.length&&window.alert("No keyframe has been created to hold this style change."),e&&"string"==typeof e||window.alert("A CSS property name surrounded in quotes was not provided."),t||window.alert('There was nothing provided for the "value" in "addStyle(name, value)"'),"string"!=typeof t&&window.alert('Please provide a string value for the "value" parameter in "addStyle(name, value)"');var n=e+":"+t+";";return-1!==n.indexOf("transform")&&(n="-webkit-"+n+"\n-moz-"+n+"\n-ms-"+n+"\n-o-"+n+"\n"+n),this._keyframes[this._keyframes.length-1].styles+=n+"\n",this},AnimationRule.prototype.register=function(e){if(!0===this._registered)return window.alert('The animation "'+this._styleName+'" has already been registered.'),this;var t;0===this._keyframes.length?window.alert("No keyframe has been created with styles added."):0!==this._keyframes.length&&""===this._keyframes[this._keyframes.length-1].styles&&window.alert("No styles where added to the last keyframe created. Please add style changes to the last keyframe before registering this animation."),this._styleName=e;var n="";0===document.head.getElementsByTagName("style").length?((t=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(t)):t=document.head.getElementsByTagName("style").item(0);for(var i=0;i<this._keyframes.length;)n+=this._keyframes[i].keyframe+" {\n"+this._keyframes[i].styles+"}\n",i+=1;return t.appendChild(document.createTextNode("@-webkit-keyframes "+this._styleName+" {\n"+n+"}\n")),t.appendChild(document.createTextNode("@-moz-keyframes "+this._styleName+" {\n"+n+"}\n")),t.appendChild(document.createTextNode("@-o-keyframes "+this._styleName+" {\n"+n+"}\n")),t.appendChild(document.createTextNode("@keyframes "+this._styleName+" {\n"+n+"}\n")),this._registered=!0,this},AnimationRule.prototype.apply=function(e,t,n,i,a,o,s){if(!1===this._registered)return window.alert("The animation has not yet been registered for use. Please call the register() method and provide a name for this animation."),this;var r=document.getElementById(e);if(!r)return window.alert('No element in the HTML has an ID attribute with the value of "'+e+'"'),this;if(!t)return window.alert('No value provided for the "startTime" parameter.'),this;if("string"!=typeof t)return window.alert('Please provide a number in seconds or milliseconds surrounded by quotes, e.g. "1.5s" for seconds or "1500ms" for milliseconds'),this;if(!n)return window.alert('No value provided for the "duration" parameter.'),this;if("string"!=typeof n)return window.alert('Please provide a number in seconds or milliseconds surrounded by quotes, e.g. "1.5s" for seconds or "1500ms" for milliseconds'),this;if(i){if(i!==Ease.EASE&&i!==Ease.EASE_IN&&i!==Ease.EASE_IN_OUT&&i!==Ease.EASE_OUT&&i!==Ease.LINEAR)return window.alert("Please provide a valid option for the ease type. This can be Ease.EASE, Ease.EASE_IN, Ease.EASE_OUT, Ease.EASE_IN_OUT, or Ease.LINEAR. The ease parameter can also be left blank and it will default to an easing type of Ease.EASE."),this}else i=Ease.EASE;if(a){if("number"==typeof a)a=""+(a>>0);else if("string"==typeof a&&a!==Iteration.INFINITE){if(!0===isNaN(parseInt(a)))return window.alert('The value for "iterationCount" is not a valid number. Please provide a whole number value for the "iterationCount" parameter.'),this;a=parseInt(a)}}else a="1";if(o){if(o!==Direction.NORMAL&&o!==Direction.REVERSE&&o!==Direction.ALTERNATE&&o!==Direction.ALTERNATE_REVERSE)return window.alert('The value for "direction" is not valid. Please provide a valid value for the "direction" parameter.'),this}else o=Direction.NORMAL;if(s){if(s!==FillMode.FORWARDS&&s!==FillMode.BACKWARDS&&s!==FillMode.BOTH&&s!==FillMode.NONE)return window.alert('The value for "fillMode" is not valid. Please provide a valid value for the "fillMode" parameter.'),this}else s=FillMode.BOTH;var l=this._styleName+" "+n+" "+i+" "+t+" "+a+" "+o+" "+s,m=navigator.userAgent;return!1===(-1!==m.indexOf("WebKit")&&-1!==m.indexOf("Safari")&&-1===m.indexOf("Chrome")&&-1===m.indexOf("OPR"))&&(r.addEventListener(AnimationRule._animationStart,AnimationRule._onAnimationStart),AnimationRule._elements.push(r)),r.style["-webkit-animation"]=l,r.style["-moz-animation"]=l,r.style["-o-animation"]=l,r.style.animation=l,this},AnimationRule.resumeAnimations=function(){for(var e=AnimationRule._elements.length-1;e>-1;)AnimationRule._elements[e].style["-webkit-animation-play-state"]="running",AnimationRule._elements[e].style["-moz-animation-play-state"]="running",AnimationRule._elements[e].style["-o-animation-play-state"]="running",AnimationRule._elements[e].style.animationPlayState="running",e-=1},AnimationRule.pauseAnimations=function(){for(var e=AnimationRule._elements.length-1;e>-1;)AnimationRule._elements[e].style["-webkit-animation-play-state"]="paused",AnimationRule._elements[e].style["-moz-animation-play-state"]="paused",AnimationRule._elements[e].style["-o-animation-play-state"]="paused",AnimationRule._elements[e].style.animationPlayState="paused",e-=1};